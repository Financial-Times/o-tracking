var Track=function(a){"use strict";var b=a._self=a._self||{};return a.version="Track version 0.0.4",a.developer=function(c){a._Utils.isUndefined(c)&&(c=!0),c?b.developer=!0:(b.developer=null,b.noSend=null)},a.init=function(c){b.config=c,a.destroy(),c.hasOwnProperty("developer")&&(delete c.developer,a.developer(),c.hasOwnProperty("noSend")&&(delete c.noSend,b.noSend=!0)),a._Core.Send.init(),a.page()},a.destroy=function(){a.developer(!1),b.internalCounter=0,b.page_sent=!1},a.toString=function(){return a.version},a}({});Track._Utils=function(a,b,c){"use strict";function d(){m.developer&&b&&b.log.apply(null,arguments)}function e(a,b){return b||(b="undefined"),typeof a===b}function f(a,b){b||(b=a,a={});var c,d,e;for(c in b)d=a[c],e=b[c],a!==e&&"undefined"!=typeof e&&null!==e&&(a[c]=e);return a}function g(a){try{return c.encodeURIComponent(a)}catch(b){return c.escape(a)}}function h(a){try{return c.decodeURIComponent(a)}catch(b){return c.unescape(a)}}function i(a){if(!a)return"";var b,c=2166136261;for(b=0;b<a.length;b++)c+=(c<<1)+(c<<4)+(c<<7)+(c<<8)+(c<<24),c^=a.charCodeAt(b);return Number(4294967295&c).toString(16)}function j(a){if(a!==Object(a))throw new TypeError("Object.keys called on a non-object");var b,c=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c}function k(a,b){var c,d=[];for(e(b)&&(b=[]),0===b.length&&(b=j(a)),c=0;c<b.length;c+=1)a.hasOwnProperty(b[c])&&d.push(b[c]+"="+g(a[b[c]]));return d.join("&")}function l(a){var b,c,d={};for(a=a.split("&"),b=0;b<a.length;b+=1)c=a[b].split("="),d[c[0]]=c.slice(1).join("=");return d}var m=a._self=a._self||{};return{log:d,is:e,isUndefined:e,merge:f,encode:g,unencode:h,hash:i,objectKeys:j,serialize:k,unserialize:l}}(Track,console,window),Track._Core=function(a,b,c){"use strict";function d(a){return i.isUndefined(a)&&(a="t"+(new Date).valueOf()+"h"+b.history.length),j.clickID=a,a}function e(a){return i.isUndefined(a)&&(a=b.history.length+"."+1e3*Math.random()+"."+(new Date).getTime()+"."+i.hash(c.location.href+c.referrer)),a}function f(){return h.internalCounter=h.internalCounter+1,h.internalCounter}function g(b,c){i.isUndefined(c)&&(c=function(){});var d=i.merge(i.merge(j,h.config),i.merge(b,{callback:c}));d.requestID=e(),d.values=i.merge({c:"",t:d.clickID,u:d.requestID,o:f()},d.values),i.log(d),a._Core.Send.addAndRun(d)}var h=a._self=a._self||{},i=a._Utils,j={environment:"test",async:!0,callback:function(){}};return{clickID:d,track:g}}(Track,window,document),Track._Core.Send=function(a,b){"use strict";function c(a){x[a]=!0}function d(a){delete x[a]}function e(){try{if(!b.localStorage)return;b.localStorage.setItem(w,JSON.stringify(v))}catch(a){}}function f(){return 0===v.length?null:x[v[0].requestID]?null:v[0]}function g(a){var b,c;for(d(a),b=0,c=v.length;c>b;b+=1)if(a===v[b].requestID){v.splice(b,1),e();break}}function h(a){var b,c,d=1,e=0;for(b=0;b<a.length;b+=1)d+=a.charCodeAt(b),e+=d;return d%=65521,e%=65521,c=65536*e+d,c.toString(16)}function i(a){if(!a)return"";try{return b.btoa(r.unencode(r.encode(a)))}catch(c){var d,e,f,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=[];for(d=0;d<a.length;d+=3)e=a.length-d,f=0,f=a.charCodeAt(d)<<16&16711680,f|=e>1?a.charCodeAt(d+1)<<8&65280:0,f|=e>2?255&a.charCodeAt(d+2):0,h.push(g.charAt((16515072&f)>>18)),h.push(g.charAt((258048&f)>>12)),h.push(e>1?g.charAt((4032&f)>>6):"_"),h.push(e>2?g.charAt(63&f):"_");return h.join("")}}function j(a,b){a=a.split("");var c,d=[];for(c=0;c<a.length;c+=1)d.push(i(b[a[c]]));return d.join("*")+"*"}function k(a){return("production"===a?s:t)+u}function l(a,e){function f(){r.is(a.callback,"function")&&a.callback.call(a,n),n.status>=200&&n.status<300?(g(a.requestID),e()):d(a.requestID)}var i,l,m,n,o=(new Date).getTime()-a.queueTime;o>1e3&&26784e5>o&&(a.offlineLag=o,a.values.p+=(-1===a.values.p.indexOf("?")?"?":"&")+"offlineLag="+o),i="f="+a.format+"&d="+j(a.format,a.values),l="&c="+h(i);try{n=new b.XMLHttpRequest}catch(p){try{n=new b.ActiveXObject("Microsoft.XMLHttp")}catch(s){}}a.async&&(n.onreadystatechange=function(){4===n.readyState&&f()},n.onerror=f),c(a.requestID),m=[i,l].join(""),q.developer&&r.log(k(a.environment)+"?"+m),q.developer&&q.noSend||(n.open("POST",k(a.environment),a.async),n.send(m)),a.async||f()}function m(a){a.queueTime=(new Date).getTime(),v.push(a),e(),q.developer&&r.log("Store",v)}function n(){var a=f();a&&l(a,n)}function o(a){m(a),n()}function p(){try{if(b.localStorage){var a=b.localStorage.getItem(w);a&&(v=JSON.parse(a),q.developer&&v.length>0&&r.log("Found store from previous session.",v))}}catch(c){}b.addEventListener&&b.addEventListener("online",n),n()}var q=a._self=a._self||{},r=a._Utils,s="http://stats.ft.com",t="http://statstest.ft.com",u="/si/track.gif",v=[],w="o-tracking-module_requests",x={};return{init:p,add:m,run:n,addAndRun:o}}(Track,window),Track.page=function(a,b,c){"use strict";function d(a){if(g.isUndefined(a))throw new Error("URL must be specified");return-1===a.indexOf("://")&&("/"!==a.substring(0,1)&&(a="/"+a),a=c.location.protocol+"//"+c.location.hostname+a),-1===a.indexOf("?")?a+=b.location.search:a=a.substr(0,a.indexOf("?"))+"?"+g.serialize(g.merge(g.unserialize(b.location.search.substring(1)),g.unserialize(a.substr(a.indexOf("?")+1)))),a}var e="pcrtgyuo",f=a._self=a._self||{},g=a._Utils,h={url:c.URL,referrer:c.referrer,co:b.screen.colorDepth,sr:b.screen.width+"x"+b.screen.height,lt:(new Date).toISOString(),jv:b.navigator.javaEnabled()?"1":"0",async:!1};return function(b,c){b=g.merge(h,b),a._Core.clickID(),a._Core.track({async:b.async,format:e,values:{p:d(b.url),r:b.referrer,g:g.serialize(b,["co","sr","lt","jv"]),y:"page"}},c),f.page_sent=!0}}(Track,window,document);