var Track=function(a){"use strict";var b=a._self=a._self||{};return a.version="Track version 0.0.4",a.init=function(c){b.config=c,a.destroy(),c.hasOwnProperty("developer")&&(delete c.developer,b.log=!0),a.page()},a.destroy=function(){b.log=null,b.internalCounter=0,b.page_sent=!1},a.toString=function(){return a.version},a}({});Track._Core=function(a,b,c){"use strict";function d(){var a="t"+(new Date).valueOf()+"h"+b.history.length;return i.clickID=a,a}function e(){return b.history.length+"."+1e3*Math.random()+"."+(new Date).getTime()+"."+a._Utils.hash(c.location.href+c.referrer)}function f(){return h.internalCounter=h.internalCounter+1,h.internalCounter}function g(b,c){a._Utils.isUndefined(c)&&(c=function(){}),b=a._Utils.merge(a._Utils.merge(i,h.config),a._Utils.merge(b,{callback:c})),b.requestID=e(),b.values=a._Utils.merge({c:"",t:b.clickID,u:b.requestID,o:f()},b.values),a._Utils.log(b)}var h=a._self=a._self||{},i={environment:"test",async:!0,callback:function(){}};return{clickID:d,track:g}}(Track,window,document),Track.page=function(a,b,c){"use strict";function d(d){if(a._Utils.isUndefined(d))throw new Error("URL must be specified");return-1===d.indexOf("://")&&("/"!==d.substring(0,1)&&(d="/"+d),d=c.location.protocol+"//"+c.location.hostname+d),-1===d.indexOf("?")?d+=b.location.search:d=d.substr(0,d.indexOf("?"))+"?"+a._Utils.serialize(a._Utils.merge(a._Utils.unserialize(b.location.search.substring(1)),a._Utils.unserialize(d.substr(d.indexOf("?")+1)))),d}var e="pcrtgyuo",f=a._self=a._self||{},g={url:c.URL,referrer:c.referrer,co:b.screen.colorDepth,sr:b.screen.width+"x"+b.screen.height,lt:(new Date).toISOString(),jv:"",async:!1};return function(b,c){b=a._Utils.merge(g,b),a._Core.clickID(),a._Core.track({async:b.async,format:e,values:{p:d(b.url),r:b.referrer,g:a._Utils.serialize(b,["co","sr","lt","jv"]),y:"page"}},c),f.page_sent=!0}}(Track,window,document),Track._Core.Send=function(a,b,c,d){"use strict";function e(a){x[a]=!0}function f(a){delete x[a]}function g(){try{if(!b.localStorage)return;b.localStorage.setItem(w,JSON.stringify(v))}catch(a){}}function h(){return 0===v.length?null:x[v[0].requestID]?null:v[0]}function i(a){var b,c;for(f(a),b=0,c=v.length;c>b;b+=1)if(a===v[b].requestID){v.splice(b,1),g();break}}function j(a){var b,c,d=1,e=0;for(b=0;b<a.length;b+=1)d+=a.charCodeAt(b),e+=d;return d%=65521,e%=65521,c=65536*e+d,c.toString(16)}function k(a){if(!a)return"";var b,c,d,e=[];for(b=0;b<a.length;b+=3)c=a.length-b,d=0,d=a.charCodeAt(b)<<16&16711680,d|=c>1?a.charCodeAt(b+1)<<8&65280:0,d|=c>2?255&a.charCodeAt(b+2):0,e.push(TRANS_CHARS.charAt((16515072&d)>>18)),e.push(TRANS_CHARS.charAt((258048&d)>>12)),e.push(c>1?TRANS_CHARS.charAt((4032&d)>>6):"_"),e.push(c>2?TRANS_CHARS.charAt(63&d):"_");return e.join("")}function l(a,b){a=a.split("");var c,d=[];for(c=0;c<a.length;c+=1)d.push(k(b[a[c]]));return d.join("*")+"*"}function m(a){return("production"===a?s:t)+u}function n(a,b){function g(){a.callback&&a.callback.call(a,n),n.status>=200&&n.status<300?(i(a.requestID),b()):f(a.requestID)}var h,k,n,o=(new Date).getTime()-a.queueTime;o>1e3&&26784e5>o&&(a.offlineLag=o),delete a.queueTime,h="f="+a.format+"&d="+l(a.format,a.values),k="&c="+j(h);try{n=new c}catch(p){try{n=new d("Microsoft.XMLHttp")}catch(q){}}a.async&&(n.onreadystatechange=function(){4===n.readyState&&g()},n.onerror=g),e(a.requestID),n.open("POST",m(a.environment),a.async),n.send(["f=",a.format,"&","d=",h,"&","c=",k].join("")),a.async||g()}function o(a){a.queueTime=(new Date).getTime(),v.push(a),g()}function p(){var a=h();a&&n(a,p)}function q(a){o(a),p()}function r(){try{if(b.localStorage){var a=b.localStorage.getItem(w);a&&(v=JSON.parse(a))}}catch(c){}b.addEventListener&&b.addEventListener("online",p),p()}var s=(a._self=a._self||{},"http://stats.ft.com"),t="http://statstest.ft.com",u="/si/track.gif",v=[],w="ft-tracking_requests",x={};return r(),{add:o,run:p,addAndRun:q}}(Track,window,XMLHttpRequest,ActiveXObject),Track._Utils=function(a,b,c,d){"use strict";function e(){m.log&&b&&b.log.apply(null,arguments)}function f(a,b){return b||(b="undefined"),typeof a===b}function g(a,b){b||(b=a,a={});var c,d,e;for(c in b)d=a[c],e=b[c],a!==e&&"undefined"!=typeof e&&null!==e&&(a[c]=e);return a}function h(a){try{return c(a)}catch(b){return d(a)}}function i(a){if(!a)return"";var b,c=2166136261;for(b=0;b<a.length;b++)c+=(c<<1)+(c<<4)+(c<<7)+(c<<8)+(c<<24),c^=a.charCodeAt(b);return Number(4294967295&c).toString(16)}function j(a){if(a!==Object(a))throw new TypeError("Object.keys called on a non-object");var b,c=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c}function k(a,b){var c,d=[];for(f(b)&&(b=[]),0===b.length&&(b=j(a)),c=0;c<b.length;c+=1)a.hasOwnProperty(b[c])&&d.push(b[c]+"="+h(a[b[c]]));return d.join("&")}function l(a){var b,c,d={};for(a=a.split("&"),b=0;b<a.length;b+=1)c=a[b].split("="),d[c[0]]=c.slice(1).join("=");return d}var m=a._self=a._self||{};return{log:e,is:f,isUndefined:f,merge:g,encode:h,hash:i,objectKeys:j,serialize:k,unserialize:l}}(Track,console,encodeURIComponent,escape);