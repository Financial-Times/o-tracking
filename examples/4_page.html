<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Example 4: page</title>
    <link rel="stylesheet" href="../build/examples/example.css" />
    <script src="../build/track.latest.min.js"></script>
</head>
<body>

<h1>Example 4: <code>page</code></h1>

<h2>Call <code>Track.page</code> with the following arguments.</h2>

<form id="example">
    <fieldset id="config">
        <legend>Config</legend>

        <div class="fields"></div>

    </fieldset>

    <fieldset id="params">
        <legend>Parameters</legend>

        <div class="fields"></div>

    </fieldset>

    <p><input type="submit"></p>
</form>

<h3>Javascript</h3>
<pre id="javascript"></pre>

<h3>Messages</h3>
<ol id="messages"></ol>


<script src="../src/resources/vendor/jquery/jquery.min.js"></script>
<script src="../build/examples/util.js"></script>
<script src="helper.js"></script>
<script>
    (function ($) {
        var util = require('util');

        var
                config = {
                    environment: 'test',
                    developer: 'true',
                    server: 'http://ftweb03299-lvpr-uk-d/'
                },
                params = {
                    url: document.location,
                    referrer: ''
                },
                key;

        for (key in config) {
            if (config.hasOwnProperty(key)) {
                $('#config .fields').append([
                    '<p>',
                    '<input type="checkbox" name="', key, '" id="config_', key, '" value="', config[key] ,'" checked="checked" /> ',
                    '<label for="config_', key, '">', key, ': ', config[key] ,'</label>',
                    '</p>'
                ].join(''));
            }
        }

        for (key in params) {
            if (params.hasOwnProperty(key)) {
                $('#params .fields').append([
                    '<p>',
                    '<label for="params_', key, '">', key, '</label> ',
                    '<input name="', key, '" id="params_', key, '" value="', params[key] ,'" type="text" />',
                    '</p>'
                ].join(''));
            }
        }

        $('#example').on('submit', function (event) {
            event.preventDefault();

            var data = $(this).serializeObject();

            $('#javascript').text('Track.page(' + util.inspect(data) + ');');

            Track.init(data);
        });
    }(jQuery));
</script>

</body>
</html>