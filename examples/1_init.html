<!doctype html>
<html>
<head>
    <title>Example 1: init</title>
    <link rel="stylesheet" href="//build.origami.ft.com/bundles/css?modules=o-techdocs@^3.2.2" />
    <link rel="stylesheet" href="./build/example.css" />
    <script src="./build/o-tracking.latest.min.js"></script>
</head>
<body class="o-techdocs">
<header class="o-techdocs-page-header">
    <h1>Example 1: <code>init</code></h1>
</header>
<header class="o-techdocs-page-header__lead">
    <h2>Call <code>oTracking.init</code> with the following arguments.</h2>
</header>

<section class="o-techdocs-content">
    <form id="example">
        <fieldset id="config">
            <legend>Developer</legend>

            <div class="fields"></div>

        </fieldset>
        <fieldset id="params">
            <legend>Parameters</legend>

            <div class="fields"></div>

        </fieldset>

        <p><input type="submit"></p>
    </form>

    <h3>Javascript</h3>
    <pre id="javascript"></pre>

    <h3>Messages</h3>
    <ol id="messages"></ol>
</section>

<script src="./build/jquery.min.js"></script>
<script src="./build/util.js"></script>
<script src="./helper.js"></script>
<script>
    (function ($) {
        var util = require('util');

        var
                config = {
                    developer: 'true',
                    noSend: 'true'
                },
                params = {
                    environment: ['test', 'production'],
                    server: ['http://ftweb03299-lvpr-uk-d.osb.ft.com/', '', 'http://test.tracking.ft.com/', 'http://localhost:3000/'],

                    // Site
                    channel : ['desktop', 'html5', 'epaper', 'flipboard'],
                    // Page
                    'url': ['http://www.ft.com/home/uk', document.location],
                    'referrer': '',
                    'uuid': '',
                    'pageSubsLevel': ['', '0', '1', '2', '3'],
                    'siteMap': ['Sections.Front page', 'Sections.World'],
                    'title': 'World business, finance, and political news from the Financial Times - FT.com',
                    'assetType': ['front', 'story', 'blog', 'video', 'section', 'page'],
                    'edition': ['UK', 'USA'],
                    'brand': '',
                    'theme': '',
                    'hurdle': ['', 'hx', 'h1', 'h2'],
                    'error': '',
                    'searchQuery': '',
                    // User
                    'userID': 'NC40NTUuODExODM1NTkyNjEyNi4xMzkzNDkzMjQ0ODU5LjZmM2U4YmFj*',
                    'cohort': ['3', '1', '2'],
                    'passportID': '4009049153',
                    'country': 'GBR',
                    'region': 'london',
                    'metroArea': 'islington',
                    // Marketing
                    'ftcamp': '',
                    'campaign': '',
                    // Implementation
                    'offlineLag': ''
                };

        $('#config .fields').append(renderConfig(config));
        $('#params .fields').append(renderParams(params));

        $('#example').on('submit', function (event) {
            event.preventDefault();

            var data = $(this).serializeObject();

            $('#javascript').text('oTracking.init(' + util.inspect(data) + ');');

            oTracking.init(data);
        });
    }(jQuery));
</script>

</body>
</html>