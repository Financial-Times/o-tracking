<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Example 2: store</title>
    <link rel="stylesheet" href="../build/examples/example.css" />
    <script src="../build/track.latest.js"></script>
</head>
<body>

<h1>Example 2: <code>store</code></h1>

<form id="init">
    <fieldset>
        <legend>Init</legend>
        <p>
            <label for="name">Name</label>
            <input type="text" name="name" id="name" value="example" />
        </p>
        <p>
            <label for="storage">Force storage method</label>
            <select name="storage" id="storage"><option value="">Choose for me</option><option value="cookie">Cookies</option></select>
        </p>

        <p><input type="submit"></p>
    </fieldset>
</form>

<form id="add" style="display: none;">
    <fieldset>
        <legend>Add</legend>
        <p>
            <label for="add_value">Value</label>
            <input type="text" name="add_value" id="add_value" value="Hello!" />
        </p>

        <p><input type="submit"></p>
    </fieldset>
</form>

<form id="save" style="display: none;">
    <fieldset>
        <legend>Save</legend>

        <p><input type="submit"></p>
    </fieldset>
</form>

<form id="getAll" style="display: none;">
    <fieldset>
        <legend>Get all</legend>

        <p><input type="submit"></p>
    </fieldset>
</form>

<h3>Javascript</h3>
<pre id="javascript"></pre>

<h3>Messages</h3>
<ol id="messages"></ol>


<script src="../src/resources/vendor/jquery/jquery.min.js"></script>
<script src="../build/examples/util.js"></script>
<script src="helper.js"></script>
<script>
    (function ($) {
        var util = require('util'),
                store;

        Track.developer();

        $('#init').on('submit', function (event) {
            event.preventDefault();

            var data = $(this).serializeObject(),
                    config = {};

            if (data.storage === 'cookie') {
                config.storage = 'cookie';
            }

            $('#javascript').text('var store = new Track._Core.Store("' + data.name + '", ' + util.inspect(config) + ');');

            store = new Track._Core.Store(data.name, config);

            console.log(store);

            $('#add, #save, #getAll').show();
        });

        $('#add').on('submit', function (event) {
            event.preventDefault();

            var data = $(this).serializeObject();

            $('#javascript').append("\n" + 'store.add("' + data.add_value + '");');

            store.add(data.add_value);

            console.log(store);
        });

        $('#save').on('submit', function (event) {
            event.preventDefault();

            $('#javascript').append("\n" + 'store.save();');

            store.save();

            console.log(store);
        });

        $('#getAll').on('submit', function (event) {
            event.preventDefault();

            $('#javascript').append("\n" + 'store.all();');

            console.log(store.all());
        });
    }(jQuery));
</script>

</body>
</html>